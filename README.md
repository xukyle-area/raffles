# ğŸš€ Raffles

Raffles æ˜¯ä¸€ä¸ªåŸºäº Flink å’Œ Spring Boot çš„é«˜å¯æ‰©å±•æµå¼å¤„ç†å¹³å°ï¼Œè´Ÿè´£ Flink ä»»åŠ¡ä¸è§„åˆ™å¼•æ“ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ä¸å®ç°ï¼Œæ”¯æŒåŠ¨æ€ä»»åŠ¡ç”Ÿæˆä¸è§„åˆ™é…ç½®åŒ–ç®¡ç†ã€‚

å…³é”®è¯: Flinkã€Spring Bootã€é…ç½®åŒ–ä»»åŠ¡ã€è§„åˆ™å¼•æ“

## æŠ€æœ¯å®ç°ä¸æˆæœ

- **å¤šæºæ•°æ®æ¥å…¥æ¶æ„**ï¼šå®ç°æµå¼ä¸æ‰¹é‡ä»»åŠ¡ç»Ÿä¸€é‡‡é›†ä¸é«˜æ•ˆå¤„ç†ï¼Œæ˜¾è‘—æå‡æ•°æ®ååæ€§èƒ½ã€‚
- **å…¨é“¾è·¯é…ç½®åŒ–ç®¡ç†**ï¼šå®ç°ä»»åŠ¡è¾“å…¥ã€é€»è¾‘ä¸è¾“å‡ºå…¨é“¾è·¯é…ç½®åŒ–ç®¡ç†ï¼Œæ”¯æŒä¸šåŠ¡æ–¹å¿«é€Ÿä¸Šçº¿æ–°ä»»åŠ¡ä¸çµæ´»æ‰©å±•ã€‚
- **ç»Ÿä¸€ REST API æ¥å£ä½“ç³»**ï¼šæ”¯æŒä»»åŠ¡è§¦å‘ã€ç›‘æ§ä¸è‡ªåŠ¨åŒ–è¿ç»´ï¼Œæå‡ç³»ç»Ÿè¿ç»´æ•ˆç‡ä¸å¯é æ€§ã€‚
- **åŠ¨æ€è§„åˆ™ç®¡ç†**ï¼šæ”¯æŒè§„åˆ™åŠ¨æ€æäº¤ã€åœ¨çº¿ç¼–è¾‘ä¸çƒ­åŠ è½½åº”ç”¨ï¼Œæ»¡è¶³é«˜é¢‘å˜æ›´ä¸å¤æ‚å®æ—¶å†³ç­–åœºæ™¯éœ€æ±‚ã€‚è§„åˆ™åŠ è½½æ—¶é—´ç¼©çŸ­ 60%ï¼Œä»»åŠ¡ä¸Šçº¿å‘¨æœŸç”± 1 å¤©é™è‡³ 1 å°æ—¶ã€‚

## æŠ€æœ¯æ ˆ

- **Flink**ï¼šæµå¼å¤„ç†æ¡†æ¶ã€‚
- **Spring Boot**ï¼šåº”ç”¨ç¨‹åºæ¡†æ¶ã€‚
- **Java**ï¼šæ ¸å¿ƒè¯­è¨€ã€‚
- **Maven**ï¼šæ„å»ºå·¥å…·ã€‚
- **MyBatis**ï¼šæ•°æ®åº“æ“ä½œã€‚
- **Docker**ï¼šå®¹å™¨åŒ–ã€‚
- **Kubernetes**ï¼šéƒ¨ç½²ã€‚
- **MySQL**ï¼šæ•°æ®åº“ã€‚

## å…ˆå†³æ¡ä»¶

- Java 8 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.x
- MySQL 8.x
- Dockerï¼ˆå¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²ï¼‰

## å…¥é—¨æŒ‡å—

### å…‹éš†ä»“åº“

```bash
git clone <repository-url>
cd raffles
```

### æ„å»ºé¡¹ç›®

ä½¿ç”¨ Maven æ„å»ºé¡¹ç›®ï¼š

```bash
mvn clean install
```

è¿™å°†ç¼–è¯‘ä»£ç ã€è¿è¡Œæµ‹è¯•ï¼Œå¹¶å°†åº”ç”¨ç¨‹åºæ‰“åŒ…æˆä½äº `target/` çš„ JAR æ–‡ä»¶ã€‚

### ç”Ÿæˆ MyBatis ä»£ç 

é¡¹ç›®ä½¿ç”¨ MyBatis Generator ä»æ•°æ®åº“è¡¨åˆ›å»ºå®ä½“ã€æ˜ å°„å™¨å’Œ XML æ–‡ä»¶ã€‚

1. ç¡®ä¿æ‚¨çš„ MySQL æ•°æ®åº“æ­£åœ¨è¿è¡Œå¹¶å·²é…ç½®ã€‚
2. ä½¿ç”¨æ‚¨çš„æ•°æ®åº“è¿æ¥è¯¦ç»†ä¿¡æ¯æ›´æ–° `src/main/resources/generatorConfig.xml`ã€‚
3. è¿è¡Œç”Ÿæˆè„šæœ¬ï¼š

```bash
./generate-mybatis.sh
```

æˆ–æ‰‹åŠ¨ä½¿ç”¨ Mavenï¼š

```bash
mvn mybatis-generator:generate
```

ç”Ÿæˆçš„æ–‡ä»¶å°†æ”¾ç½®åœ¨ï¼š
- å®ä½“ï¼š`src/main/java/com/gantenx/raffles/model/entity/`
- æ˜ å°„å™¨ï¼š`src/main/java/com/gantenx/raffles/model/mapper/`
- XML æ˜ å°„ï¼š`src/main/resources/mapper/`

### è¿è¡Œåº”ç”¨ç¨‹åº

æ„å»ºåï¼Œè¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºï¼š

```bash
java -jar target/raffles-1.0-SNAPSHOT.jar
```

æˆ–ä½¿ç”¨ Mavenï¼š

```bash
mvn spring-boot:run
```

åº”ç”¨ç¨‹åºå°†åœ¨é»˜è®¤ç«¯å£ï¼ˆé€šå¸¸ä¸º 8080ï¼‰ä¸Šå¯åŠ¨ã€‚æ£€æŸ¥ `src/main/resources/application.yaml` ä»¥è·å–é…ç½®ã€‚

### Docker æ„å»º

ä½¿ç”¨ Docker æ„å»ºå’Œè¿è¡Œï¼š

```bash
./build-docker.sh
```

è¿™ä½¿ç”¨æ ¹ç›®å½•ä¸­çš„ `dockerfile`ã€‚

### Kubernetes éƒ¨ç½²

ä½¿ç”¨æä¾›çš„è„šæœ¬åœ¨ Kubernetes ä¸­é‡å¯ï¼š

```bash
./restart-in-kubernetes.sh
```

## é…ç½®

- **æ•°æ®åº“**ï¼šåœ¨ `src/main/resources/generatorConfig.xml` å’Œ `application.yaml` ä¸­é…ç½®ã€‚
- **Flink ä»»åŠ¡**ï¼šé…ç½®åŒ–ä»»åŠ¡ç®¡ç†ã€‚
- **è§„åˆ™**ï¼šåŠ¨æ€è§„åˆ™å¼•æ“ã€‚

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/gantenx/raffles/
â”‚   â”‚   â”‚   â”œâ”€â”€ config/          # é…ç½®ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ model/           # ç”Ÿæˆçš„å®ä½“å’Œæ˜ å°„å™¨
â”‚   â”‚   â”‚   â””â”€â”€ utils/           # å·¥å…·ç±»ï¼Œå¦‚ FileListing å’Œ FlinkTypeUtils
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ generatorConfig.xml  # MyBatis ç”Ÿæˆå™¨é…ç½®
â”‚   â”‚       â””â”€â”€ mapper/          # ç”Ÿæˆçš„ XML æ˜ å°„
â”‚   â””â”€â”€ test/                    # æµ‹è¯•æºä»£ç 
â”œâ”€â”€ target/                      # æ„å»ºè¾“å‡º
â”œâ”€â”€ pom.xml                      # Maven é…ç½®
â”œâ”€â”€ dockerfile                   # Docker æ„å»ºæ–‡ä»¶
â”œâ”€â”€ generate-mybatis.sh          # MyBatis ä»£ç ç”Ÿæˆè„šæœ¬
â””â”€â”€ README.md                    # æ­¤æ–‡ä»¶
```

## è´¡çŒ®

1. Fork ä»“åº“ã€‚
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ã€‚
3. è¿›è¡Œæ›´æ”¹ã€‚
4. è¿è¡Œæµ‹è¯•å¹¶æ„å»ºã€‚
5. æäº¤æ‹‰å–è¯·æ±‚ã€‚

## è®¸å¯è¯

[åœ¨æ­¤æŒ‡å®šæ‚¨çš„è®¸å¯è¯ï¼Œä¾‹å¦‚ MIT]

## é™„åŠ èµ„æº

- [MyBatis Generator æ–‡æ¡£](https://mybatis.org/generator/)
- [Spring Boot æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [Apache Flink æ–‡æ¡£](https://flink.apache.org/)
- æœ‰å…³è¯¦ç»†çš„ MyBatis è®¾ç½®ï¼Œè¯·å‚è§ `MYBATIS_GENERATOR_README.md`ã€‚